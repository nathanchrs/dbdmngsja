/*
 * jQuery Floating Scrollbar - v0.5 - 09/05/2013
 * http://benalman.com/
 * 
 * Copyright (c) 2011 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

(function(d,j){var h=d(j),a=d([]),i,e,f=d('<div id="floating-scrollbar"><div/></div>'),b=f.children();function g(l){f.toggle(!!l)}function k(){if(i){f.scrollLeft(i.scrollLeft())}}function c(){e=i;i=null;a.each(function(){var s=d(this),t=s.offset().top,p=t+s.height(),r=h.scrollTop()+h.height(),q=30;if(t+q<r&&p>r){i=s;return false}});if(!i){g();return}var m=i.scrollLeft(),l=i.scrollLeft(90019001).scrollLeft(),o=i.innerWidth(),n=o+l;i.scrollLeft(m);if(n<=o){g();return}g(true);if(!e||e[0]!==i[0]){if(e){e.unbind("scroll",k)}i.scroll(k).after(f)}f.css({left:i.offset().left-h.scrollLeft(),width:o}).scrollLeft(m);b.width(n)}f.hide().css({position:"fixed",bottom:0,height:"30px",overflowX:"auto",overflowY:"hidden"}).scroll(function(){if(i){i.scrollLeft(f.scrollLeft())}});b.css({border:"1px solid #fff",opacity:0.01});d.fn.floatingScrollbar=function(l){if(l===false){a=a.not(this);this.unbind("scroll",k);if(!a.length){f.detach();h.unbind("resize scroll",c)}}else{if(this.length){if(!a.length){h.resize(c).scroll(c)}a=a.add(this)}}c();return this};d.floatingScrollbarUpdate=c})(jQuery,this);